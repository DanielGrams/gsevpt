{% extends "layout.html" %}
{% block title %}
{{ admin_unit.name }}
{% endblock %}
{% block content %}

    <h1>{{ admin_unit.name }}</h1>

    {% if current_user_member %}
    <div class="my-4">
        {{ _('You are a member of this admin unit.') }}
        ({% for role in current_user_member.roles %}{{ role.name }}{%if not loop.last %}, {% endif %}{% endfor %})
    </div>
    {% endif %}

    {% if can_list_admin_unit_members %}
    <p class="h5 mt-5">{{ _('Members') }}</p>
    <div class="table-responsive">
        <table class="table table-sm table-bordered table-hover table-striped">
            <thead>
                <tr>
                    <th>{{ _('Name') }}</th>
                    <th>{{ _('Roles') }}</th>
                </tr>
            </thead>
            <tbody>
                {% for member in admin_unit.members %}
                    <tr>
                        <td>{{ member.user.email }}</td>
                        <td>{% for role in member.roles %}{{ role.name }}{%if not loop.last %}, {% endif %}{% endfor %}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    <p class="h5 mt-5">{{ _('Organizations') }}</p>
    <div class="table-responsive">
        <table class="table table-sm table-bordered table-hover table-striped">
            <thead>
                <tr>
                    <th>{{ _('Name') }}</th>
                    <th>{{ _('Roles') }}</th>
                </tr>
            </thead>
            <tbody>
                {% for admin_unit_org in admin_unit.organizations %}
                    <tr>
                        <td><a href="{{ url_for('organization', organization_id=admin_unit_org.organization_id) }}">{{ admin_unit_org.organization.name }}</a></td>
                        <td>{% for role in admin_unit_org.roles %}{{ role.name }}{%if not loop.last %}, {% endif %}{% endfor %}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}